<source>
  type tail
  read_from_head true
  path /var/lib/docker/containers/*/*-json.log
  pos_file /var_host/log/fluentd-docker.pos
  time_format %Y-%m-%dT%H:%M:%S
  tag docker.*
  format json
</source>

<match **.**>
  type amqp
  key "#{ENV['AMQP_KEY'] || 'fluent'}"
  exchange "#{ENV['AMQP_EXCHANGE'] || 'amq.direct'}"
  host "#{ENV['AMQP_SERVER'] || 'localhost'}"
  port "#{ENV['AMQP_PORT'] || '5672'}"
  vhost "#{ENV['AMQP_VHOST'] || '/'}"
  user "#{ENV['AMQP_USER'] || 'guest'}"
  pass "#{ENV['AMQP_PASS'] || 'guest'}"
  passive "#{ENV['AMQP_PASSIVE'] || 'true'}"
  # TLS enabled by default
  #tls "#{ENV['AMQP_TLS'] || 'true'}"
  #tls_cert "#{ENV['AMQP_TLS_CERT']}"
  #tls_key "#{ENV['AMQP_TLS_KEY']}"
</match>
